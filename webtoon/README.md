# æ¼«ç”»è§£è¯´è§†é¢‘ç”Ÿæˆç³»ç»Ÿ

å°†æ¼«ç”»è‡ªåŠ¨è½¬æ¢ä¸ºå¸¦è§£è¯´çš„è§†é¢‘ï¼Œæ”¯æŒWebtoonç­‰åœ¨çº¿æ¼«ç”»å¹³å°ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **ç²¾ç¡®æ—¶é•¿å¯¹é½**ï¼šæ¯å¼ å›¾ç‰‡ç‹¬ç«‹ç”ŸæˆéŸ³é¢‘ï¼Œç¡®ä¿ç”»é¢ä¸è§£è¯´å®Œç¾åŒæ­¥
- ğŸ¤– **æ™ºèƒ½å†…å®¹ç†è§£**ï¼šä½¿ç”¨Gemini AIåˆ†æç”»é¢å†…å®¹å’Œæ•…äº‹æƒ…èŠ‚
- ğŸ“ **è¿è´¯æ–‡æ¡ˆç”Ÿæˆ**ï¼šä¿æŒä¸Šä¸‹æ–‡è¿è´¯çš„è§£è¯´è¯ç”Ÿæˆ
- ğŸµ **è‡ªåŠ¨è¯­éŸ³åˆæˆ**ï¼šæ”¯æŒå¤šç§è¯­éŸ³å’Œè¯­é€Ÿè°ƒæ•´
- ğŸ¬ **å‰ªæ˜ è‰ç¨¿è¾“å‡º**ï¼šè‡ªåŠ¨ç”Ÿæˆå¯ç›´æ¥å¯¼å…¥å‰ªæ˜ çš„è‰ç¨¿æ–‡ä»¶

## ç³»ç»Ÿæ¶æ„

```
webtoon/
â”œâ”€â”€ download_webtoon.py       # æ¼«ç”»ä¸‹è½½å™¨
â”œâ”€â”€ comic_video_creator.py    # å‘½ä»¤è¡Œå…¥å£
â”œâ”€â”€ comic_config.yaml         # é…ç½®æ–‡ä»¶
â””â”€â”€ comic_pipeline/           # æ ¸å¿ƒPipeline
    â”œâ”€â”€ models.py             # æ•°æ®æ¨¡å‹
    â”œâ”€â”€ config.py             # é…ç½®ç®¡ç†
    â”œâ”€â”€ pipeline.py           # ä¸»Pipeline
    â””â”€â”€ stages/               # å¤„ç†é˜¶æ®µ
        â”œâ”€â”€ image_analyzer.py    # å›¾ç‰‡åˆ†æ
        â”œâ”€â”€ narration_generator.py # æ–‡æ¡ˆç”Ÿæˆ
        â””â”€â”€ audio_generator.py    # éŸ³é¢‘ç”Ÿæˆ
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# åŸºç¡€ä¾èµ–
pip install -r requirements.txt

# æ¼«ç”»ä¸‹è½½ä¾èµ–
pip install -r requirements_downloader.txt
```

### 2. è®¾ç½®APIå¯†é’¥

```bash
export GEMINI_API_KEY="your-gemini-api-key"
```

### 3. ä¸‹è½½å¹¶å¤„ç†æ¼«ç”»

```bash
# ä¸‹è½½Webtoonæ¼«ç”»å¹¶ç”Ÿæˆè§†é¢‘
python webtoon/comic_video_creator.py \
    --url "https://www.webtoons.com/en/fantasy/comic-name/list?title_no=1234" \
    --download

# å¤„ç†å·²ä¸‹è½½çš„æ¼«ç”»
python webtoon/comic_video_creator.py \
    --dir "outputs/webtoon/comic_name/001_chapter"
```

## é…ç½®è¯´æ˜

ç¼–è¾‘ `comic_config.yaml` è‡ªå®šä¹‰é…ç½®ï¼š

```yaml
# Gemini AIé…ç½®
gemini:
  model: "gemini-1.5-flash"
  temperature: 0.7

# è¯­éŸ³é…ç½®
tts:
  voice: "zh-CN-XiaoxiaoNeural"  # ä¸­æ–‡å¥³å£°
  rate: "+0%"     # è¯­é€Ÿè°ƒæ•´
  
# æ–‡æ¡ˆç”Ÿæˆé…ç½®
narration:
  words_per_second: 2.5  # æ¯ç§’å­—æ•°
  min_words_per_image: 30
  max_words_per_image: 80
  narration_style: "ç”ŸåŠ¨æ´»æ³¼"

# åœºæ™¯æ—¶é•¿é…ç½®
scene_durations:
  action: [3, 5]      # åŠ¨ä½œåœºæ™¯3-5ç§’
  dialog: [5, 8]      # å¯¹è¯åœºæ™¯5-8ç§’
  transition: [2, 3]  # è¿‡æ¸¡åœºæ™¯2-3ç§’
  climax: [8, 10]     # é«˜æ½®åœºæ™¯8-10ç§’
```

## å·¥ä½œæµç¨‹

1. **ä¸‹è½½æ¼«ç”»**ï¼šä»Webtoonä¸‹è½½æ¼«ç”»å›¾ç‰‡
2. **å›¾ç‰‡åˆ†æ**ï¼šä½¿ç”¨Gemini AIç†è§£ç”»é¢å†…å®¹
3. **æ•…äº‹ç†è§£**ï¼šåˆ†ææ•´ä½“æ•…äº‹è„‰ç»œå’Œè§’è‰²
4. **æ–‡æ¡ˆç”Ÿæˆ**ï¼šä¸ºæ¯å¼ å›¾ç‰‡ç”Ÿæˆè§£è¯´è¯
5. **éŸ³é¢‘åˆæˆ**ï¼šå°†æ–‡æ¡ˆè½¬æ¢ä¸ºè¯­éŸ³
6. **æ—¶é•¿å¯¹é½**ï¼šç²¾ç¡®æµ‹é‡æ¯æ®µéŸ³é¢‘æ—¶é•¿
7. **è‰ç¨¿ç”Ÿæˆ**ï¼šåˆ›å»ºå‰ªæ˜ é¡¹ç›®æ–‡ä»¶

## æ ¸å¿ƒè®¾è®¡

### æ—¶é•¿å¯¹é½æ–¹æ¡ˆ

é‡‡ç”¨**é€å›¾ç‹¬ç«‹ç”Ÿæˆ**æ–¹æ¡ˆï¼Œç¡®ä¿100%ç²¾ç¡®å¯¹é½ï¼š

```python
for image in images:
    # ç”Ÿæˆæ–‡æ¡ˆ
    narration = generate_narration(image, context)
    
    # ç”ŸæˆéŸ³é¢‘
    audio_file = tts.generate(narration)
    
    # æµ‹é‡ç²¾ç¡®æ—¶é•¿
    duration = get_audio_duration(audio_file)
    
    # è®°å½•æ—¶é—´è½´
    timeline.append({
        "image": image,
        "audio": audio_file,
        "duration": duration
    })
```

### è¿è´¯æ€§ä¿è¯

é€šè¿‡ä¸Šä¸‹æ–‡ä¼ é€’ä¿æŒæ•…äº‹è¿è´¯ï¼š

```python
context = NarrationContext(
    previous_narrations=[...],  # å‰æ–‡å†…å®¹
    story_outline="...",         # æ•…äº‹å¤§çº²
    current_emotion="ç´§å¼ "       # æƒ…ç»ªåŸºè°ƒ
)
```

## å‘½ä»¤è¡Œå‚æ•°

```bash
# åŸºæœ¬ç”¨æ³•
python comic_video_creator.py --dir <æ¼«ç”»ç›®å½•>

# å®Œæ•´å‚æ•°
--url URL           # Webtoon URL
--dir DIR           # æœ¬åœ°æ¼«ç”»ç›®å½•
--download          # ä¸‹è½½æ¼«ç”»
--config FILE       # é…ç½®æ–‡ä»¶è·¯å¾„
--limit N           # é™åˆ¶å¤„ç†å›¾ç‰‡æ•°é‡
--chapter NAME      # æŒ‡å®šç« èŠ‚åç§°
--no-draft          # ä¸ç”Ÿæˆå‰ªæ˜ è‰ç¨¿
--no-merge          # ä¸åˆå¹¶éŸ³é¢‘
--verbose           # è¯¦ç»†æ—¥å¿—
--dry-run           # æµ‹è¯•æ¨¡å¼
```

## è¾“å‡ºæ–‡ä»¶

```
output/comic_videos/
â”œâ”€â”€ comic_name/
â”‚   â”œâ”€â”€ audio/           # éŸ³é¢‘æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ narration_001.mp3
â”‚   â”‚   â”œâ”€â”€ narration_002.mp3
â”‚   â”‚   â””â”€â”€ merged_audio.mp3
â”‚   â””â”€â”€ drafts/          # å‰ªæ˜ è‰ç¨¿
â”‚       â””â”€â”€ comic_chapter/
â”‚           â”œâ”€â”€ draft_content.json
â”‚           â”œâ”€â”€ draft_meta_info.json
â”‚           â””â”€â”€ materials/
```

## æ³¨æ„äº‹é¡¹

1. **APIé…é¢**ï¼šGemini APIæœ‰è°ƒç”¨é™åˆ¶ï¼Œå¤„ç†å¤§é‡å›¾ç‰‡æ—¶æ³¨æ„é…é¢
2. **å›¾ç‰‡é¡ºåº**ï¼šç¡®ä¿å›¾ç‰‡æŒ‰æ­£ç¡®é¡ºåºå‘½åï¼ˆå¦‚001.jpg, 002.jpgï¼‰
3. **å†…å­˜ä½¿ç”¨**ï¼šå¤„ç†å¤§é‡å›¾ç‰‡æ—¶å¯èƒ½å ç”¨è¾ƒå¤šå†…å­˜
4. **ç½‘ç»œè¦æ±‚**ï¼šä¸‹è½½å’ŒAPIè°ƒç”¨éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ä¸‹è½½å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤URLæ­£ç¡®
   - æŸäº›åœ°åŒºå¯èƒ½éœ€è¦ä»£ç†

2. **APIé”™è¯¯**
   - ç¡®è®¤APIå¯†é’¥æ­£ç¡®
   - æ£€æŸ¥APIé…é¢
   - é™ä½è¯·æ±‚é¢‘ç‡

3. **éŸ³é¢‘ç”Ÿæˆå¤±è´¥**
   - ç¡®è®¤edge-ttså·²å®‰è£…
   - æ£€æŸ¥æ–‡æœ¬ç¼–ç 
   - å°è¯•æ›´æ¢è¯­éŸ³

## å¼€å‘è®¡åˆ’

- [ ] æ”¯æŒæ›´å¤šæ¼«ç”»å¹³å°
- [ ] æ‰¹é‡ç« èŠ‚å¤„ç†
- [ ] è‡ªåŠ¨å­—å¹•ç”Ÿæˆ
- [ ] èƒŒæ™¯éŸ³ä¹æ·»åŠ 
- [ ] ç”»é¢ç‰¹æ•ˆå¢å¼º
- [ ] å¤šè¯­è¨€æ”¯æŒ

## License

MIT